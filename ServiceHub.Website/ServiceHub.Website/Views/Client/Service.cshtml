@model ServiceHub.Website.Models.ServiceViewModel
@{
    ViewBag.Title = "Service";
}
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script>
        $(document).ready(function () {

        });

        function ConfirmDelete() {
            return confirm("Are you ure you want to cancel this service?");
        }

        function AddAdditionalInfo() {

            $("#AdditionalInfos").append( $("#AdditionalInfo").val() + "<br/>");
            $("#AdditionalInfo").val("");
        }
    </script>
}


<div class="well bs-component">
    <fieldset>
        <legend>Service</legend>
        @using (Html.BeginForm("CancelSevice", "Client", FormMethod.Post, new { @class = "form-horizontal", onsubmit = "return ConfirmDelete();" }))
        {


            if (Model.IsCancelled)
            {
                <text>Cancelled</text>
            }
            else
            {
                @Html.HiddenFor(o => o.ServiceId)
                <input type="submit" title="Cancel" value="Cancel Service" id="Cancel" class="btn btn-default" />
            }
            <div class="form-group">
                @Html.LabelFor(m => m.Reference, new { @class = "col-lg-2 control-label" })
                <div class="col-lg-10">
                    @Html.DisplayFor(m => m.Reference)
                </div>
            </div>
            <div class="form-group">
                @Html.LabelFor(m => m.Description, new { @class = "col-lg-2 control-label" })
                <div class="col-lg-10">
                    @Html.DisplayFor(m => m.Description)
                </div>
            </div>
            <div class="form-group">
                @Html.LabelFor(m => m.AddtionalInfo, new { @class = "col-lg-2 control-label" })
                <div class="col-lg-10" id="AdditionalInfos">
                    @foreach (string info in Model.AddtionalInfo)
                    {
                        @Html.DisplayFor(m => info)<br />

                    }
                </div>
            </div>
            <div class="form-group">
                @Html.LabelFor(m => m.ServiceDate, new { @class = "col-lg-2 control-label" })
                <div class="col-lg-10">
                    @Html.DisplayFor(m => m.ServiceDate)
                </div>
            </div>
            <div class="form-group">
                @Html.LabelFor(m => m.BiddingCompletionDate, new { @class = "col-lg-2 control-label" })
                <div class="col-lg-10">
                    @Html.DisplayFor(m => m.BiddingCompletionDate)
                </div>
            </div>
            <div class="form-group">
                @Html.LabelFor(m => m.ServiceTag, new { @class = "col-lg-2 control-label" })
                <div class="col-lg-10">
                    @Html.DisplayFor(m => m.ServiceTag)
                </div>
            </div>
           
            <div class="form-group">
                @Html.LabelFor(m => m.Location, new { @class = "col-lg-2 control-label" })
                <div class="col-lg-10">
                    @Html.DisplayFor(m => m.Location)
                </div>
            </div>
            <div class="form-group">
                @Html.LabelFor(m => m.AddtionalInfoRequests, new { @class = "col-lg-2 control-label" })
                <div class="col-lg-10">
                    @foreach (string request in Model.AddtionalInfoRequests)
                    {
                        @Html.DisplayFor(m => request)<br />

                    }
                </div>
            </div>

        }
        @if (!Model.IsCancelled)
        {
            <div class="form-group">
                <div class="col-lg-10">
                    @using (Ajax.BeginForm("AddAdditionalInfo", "Client", new AjaxOptions { UpdateTargetId = "AdditionalInfoRequestResult", OnSuccess = "AddAdditionalInfo();" /*, LoadingElementId = "loading"*/}))
                    {

                        @Html.HiddenFor(o => o.ServiceId)
                        @Html.TextArea("AdditionalInfo")

                        <input type="submit" title="Add Additional Info" value="Add Additional Info" class="btn btn-default" />
                    }
                    <div id="AdditionalInfoRequestResult"></div>
                </div>
            </div>
        }
    </fieldset>











</div>